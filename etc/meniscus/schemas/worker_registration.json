{
    "id": "http://projectmeniscus.org/json/worker_registration#",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "description": "Worker Registration Schema",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "required": [
            "hostname",
            "callback",
            "ip_address_v4",
            "ip_address_v6",
            "personality",
            "status",
            "system_info"
        ],
        "hostname": {
            "type": "string"
        },
        "callback": {
            "type": "string"
        },
        "ip_address_v4": {
            "type": "string"
        },
        "ip_address_v6": {
            "type": "string"
        },
        "personality": {
            "enum": [
                "coordinator",
                "worker"
            ]
        },
        "status": {
            "enum": [
                "new",
                "online",
                "offline",
                "draining"
            ]
        },
        "system_info": {
            "$ref": "#/definitions/system_info"
        }
    },
    "oneOf": [
        {
            "required": [
                "system_info"
            ]
        }
    ],
    "definitions": {
        "system_info": {
            "required": [
                "os_type",
                "memory_mb",
                "architecture",
                "cpu_cores"
            ],
            "additionalProperties": false,
            "os_type": {
                "type": "string"
            },
            "memory_mb": {
                "type": "integer"
            },
            "architecture": {
                "type": "string"
            },
            "cpu_cores": {
                "type": "integer"
            },
            "disk_usage": {
                "$ref": "#/definitions/disk_usage"
            },
            "load_average": {
                "$ref": "#/definitions/load_average"
            }
        },
        "disk_usage": {
            "additionalProperties": "#/definitions/storage"
        },
        "storage": {
            "required": [
                "total",
                "used"
            ],
            "additionalProperties": false,
            "total": {
                "type": "integer"
            },
            "used": {
                "type": "integer"
            }
        },
        "load_average": {
            "1": {
                "type": "integer"
            },
            "5": {
                "type": "integer"
            },
            "15": {
                "type": "integer"
            },
            "required": [
                "1",
                "5",
                "15"
            ],
            "additionalProperties": false
        }
    }
}