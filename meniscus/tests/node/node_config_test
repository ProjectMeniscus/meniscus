import unittest
from meniscus.config import init_config, get_config
from meniscus.node.node_config import node_group, NODE_OPTIONS

def suite():
    suite = unittest.TestSuite()
    suite.addTest(WhenConfiguring())


class WhenConfiguring(unittest.TestCase):

    def test_loading(self):

        init_config(['--config-file', '../../../node.cfg.example'])

        conf = get_config()
        conf.register_group(node_group)
        conf.register_opts(NODE_OPTIONS, group=node_group)
        self.assertTrue(conf.node_cfg.verbose)
        self.assertEqual(conf.node_cfg.personality, 'cfg_node_personality')
        self.assertEqual(conf.node_cfg.name, 'cfg_node_name')

if __name__ == '__main__':
    unittest.main()